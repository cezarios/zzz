<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
            integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
            integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
            crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Admin</title>
</head>
<body>
<div class="container p-4">
    <fieldset class="border border-2">
        <h2 class="display-5 text-center">Admin Panel</h2>
        <hr>
        <div class="row p-2">
            <p class="lead">Admin: <%= admin.nickname %></p>
            <fieldset class="p-2">
                <div>
                    <h4>All Users:</h4>
                    <hr>
                    <table class="table">
                        <tr>
                            <th>Username</th>
                            <th>First Name</th>
                            <th>Last Name</th>
                            <th>Country</th>
                            <th>Email</th>
                            <th>Role</th>
                        </tr>
                        <% users.forEach(function(user) { %>
                            <tr>
                                <td><%= user.nickname %></td>
                                <td><%= user.first_name %></td>
                                <td><%= user.last_name %></td>
                                <td><%= user.country %></td>
                                <td><%= user.email %></td>
                                <td><%= user.roles %></td>
                                <td>
                                    <a onclick="location.href='/admin/edit/<%= user._id %>'" class="btn btn-outline-success"
                                       style="width: 80%">Edit
                                    </a>
                                </td>
                                <td>
                                    <a type="submit"
                                       onclick="if (confirmF()) location.href='/admin/delete/<%= user._id %>'"
                                       class="btn btn-outline-danger" style="width: 60%">Delete</a>
                                </td>
                            </tr>
                            <script>
                                function confirmF() {
                                    return confirm("Are you sure you want to delete the user?\n(You cannot delete the administrator)!");
                                }
                            </script>
                        <% }) %>
                    </table>
                </div>
                <button class="btn btn-outline-info" onclick="location.href='/admin/new'">New User</button>
                <button class="btn btn-outline-primary" onclick="location.href='/admin/sortByName'">Sort By Name</button>
                <button class="btn btn-outline-primary" onclick="location.href='/admin/sortByCountry'">Sort By Country</button>


                <hr>

            </fieldset>
        </div>

        <div class="row p-2">
            <fieldset class="p-2">
                <div>
                    <h4>All sick children:</h4>
                    <hr>
                    <table class="table">
                        <tr>
                            <th>First Name</th>
                            <th>Last Name</th>
                            <th>Age</th>
                            <th>Country</th>
                            <th>Diagnosis</th>
                            <th>Stage</th>
                            <th>Collected</th>
                            <th>Goal</th>
                        </tr>
                        <% children.forEach(function(child) { %>
                            <tr>
                                <td><%= child.first_name %></td>
                                <td><%= child.last_name %></td>
                                <td><%= child.age %></td>
                                <td><%= child.country %></td>
                                <td><%= child.diagnosis %></td>
                                <td><%= child.stage %></td>
                                <td><%= child.collected %></td>
                                <td><%= child.goal %></td>
                                <td>
                                    <a onclick="location.href='/admin/editChild/<%= child._id %>'" class="btn btn-outline-success"
                                       style="width: 80%">Edit
                                    </a>
                                </td>
                                <td>
                                    <a type="submit"
                                       onclick="location.href='/admin/deleteChild/<%= child._id %>'"
                                       class="btn btn-outline-danger" style="width: 60%">Delete</a>
                                </td>
                            </tr>
                        <% }) %>
                    </table>
                </div>
                <button class="btn btn-outline-info" onclick="location.href='/admin/newChild'">New Child</button>
                <hr>

            </fieldset>
        </div>
    </fieldset>
</div>
</body>
</html>